#!/usr/bin/env bash
# $1: full install path for an instance of python2.7.11, ignore for macOS.

LOCALPY=$1
if [ $(uname -s) == "Darwin" ]; then  # On macOS we use the system python
    PATH=/usr/bin:$PATH
else
    mkdir $LOCALPY
    cd $LOCALPY
    wget https://www.python.org/ftp/python/2.7.11/Python-2.7.11.tgz
    tar xf Python-2.7.11.tgz
    #find $LOCALPY -type d | xargs chmod 0755 # TODO is this needed?
    cd Python-2.7.11
    ./configure --prefix=$LOCALPY
    make && make install
    # PATH=$HOME/localpy/Python-2.7.11/:$PATH  # Duncan's, needed?
    PATH=$LOCALPY/Python-2.7.11/bin:$PATH # Point to the new local python executables
fi

wget --no-check-certificate https://bootstrap.pypa.io/get-pip.py -O - | \
    python - --user

pip install --user virtualenv


echo
echo 'python built in:'
echo $LOCALPY
echo 'python executable:'
which python
echo 'pip executable:'
which pip
echo 'virtualenv executable:'
which virtualenv
