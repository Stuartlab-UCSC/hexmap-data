#!/usr/bin/env bash
# $1: full install path for an instance of python2.7.11, ignore for macOS.

LOCALPY=$1

# Build python.
if [ $(uname -s) == "Darwin" ]; then  # On macOS we use the system python
    PATH=/usr/bin:$PATH
else
    mkdir $LOCALPY
    cd $LOCALPY
    wget https://www.python.org/ftp/python/2.7.11/Python-2.7.11.tgz
    tar xf Python-2.7.11.tgz
    cd Python-2.7.11
    ./configure --prefix=$LOCALPY
    make && make install
    PATH=$LOCALPY/bin:$PATH # Point to the new local python executables
fi

# Build pip.
wget --no-check-certificate https://bootstrap.pypa.io/get-pip.py -O - | python - --user

# Add the bin directory to the path.
if [ $(uname -s) != "Darwin" ]; then
    PATH=$HOME/.local/bin:$PATH
fi

# Install virtual env.
pip install --user virtualenv


echo
echo 'python built in:'
echo $LOCALPY
echo 'python executable:'
which python
echo 'pip executable:'
which pip
echo 'virtualenv executable:'
which virtualenv
