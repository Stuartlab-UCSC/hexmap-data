#!/bin/bash

# Install new code from a tarball.
source $HEXCALC/ops/config.sh

if [ -z $INSTALL_TAR_PATH ]; then
    echo "Exited, the env var, INSTALL_TAR_PATH, must be defined"
    echo "Do you want to run deployWww instead?"
    exit 1
fi

echo "untarring..."
rm -rf \
    $HEXCALC/bin \
    $HEXCALC/build \
    $HEXCALC/calc \
    $HEXCALC/ops/configExamples \
    $HEXCALC/standalone \
    $HEXCALC/tests \
    $HEXCALC/www

tar -xf $INSTALL_TAR_PATH -C $HEXCALC

echo "Untar complete. Issue 'restart' to restart"
